(()=>{"use strict";const e=()=>{const e=document.querySelectorAll(".progress"),t=document.querySelector(".switch");e.forEach((e=>{e.addEventListener("input",(function(){let e=this.value;this.style.background=`linear-gradient(to right, #FFBCA2 0%, #FFBCA2 ${e}%, #C4C4C4 ${e}%, #C4C4C4 100%)`}))})),t.addEventListener("click",(()=>{t.classList.toggle("switchOn")}))},t={backgroundOverlay:document.querySelector(".container-overlay"),ltCorner:document.querySelector(".container-overlay-lt"),rtCorner:document.querySelector(".container-overlay-rt"),lbCorner:document.querySelector(".container-overlay-lb"),rbCorner:document.querySelector(".container-overlay-rb"),cornersCover:function(){this.backgroundOverlay.classList.remove("hidden"),this.ltCorner.classList.add("slideInLT"),this.ltCorner.addEventListener("animationend",(()=>{this.ltCorner.classList.remove("slideInLT"),this.backgroundOverlay.classList.add("hidden")})),this.rtCorner.classList.add("slideInRT"),this.rtCorner.addEventListener("animationend",(()=>{this.rtCorner.classList.remove("slideInRT")})),this.lbCorner.classList.add("slideInLB"),this.lbCorner.addEventListener("animationend",(()=>{this.lbCorner.classList.remove("slideInLB")})),this.rbCorner.classList.add("slideInRB"),this.rbCorner.addEventListener("animationend",(()=>{this.rbCorner.classList.remove("slideInRB")}))},openModal:function(e,t){t.classList.remove("hidden"),e.classList.remove("hidden"),e.classList.add("fadeIn"),e.addEventListener("animationend",(()=>{e.classList.remove("fadeIn"),e.classList.remove("hidden-modal")}))},closeModal:function(e,t,n=!1){!1===n?(e.classList.add("hidden-modal"),e.classList.add("hidden"),t.classList.add("hidden")):(e.classList.add("fadeOut"),e.addEventListener("animationend",(function(){e.classList.add("hidden-modal"),e.classList.remove("fadeOut"),e.classList.add("hidden"),t.classList.add("hidden")})))}},n=()=>{const e=document.querySelector(".container"),n=document.querySelector(".header-default"),i=document.querySelector(".mainscreen-container"),s=document.querySelector(".mainscreen-settings-open-btn"),o=document.querySelector(".mainscreen-buttons-artists"),r=document.querySelector(".mainscreen-buttons-pictures"),a=document.querySelector(".header-settings"),c=document.querySelector(".settings"),d=document.querySelectorAll(".settings-close"),l=document.querySelector(".settings-save-button"),u=document.querySelector(".header-menu"),m=document.querySelector(".categories-artists"),g=document.querySelector(".categories-paintings"),v=document.querySelector(".categories-settings-open-btn"),h=document.querySelector(".header-menu-text-home"),y=document.querySelectorAll(".categories-artists-item"),L=document.querySelectorAll(".categories-paintings-item"),q=document.querySelectorAll(".categories-item-header-score-ar"),f=document.querySelectorAll(".categories-item-header-score-pa"),S=document.querySelector(".header-questions"),p=document.querySelector(".header-questions-close"),b=document.querySelector(".questions-artists"),C=document.querySelector(".questions-artists-picture-img"),E=document.querySelectorAll(".questions-artists-picture-dots-item"),x=document.querySelector(".questions-paintings"),k=document.querySelector(".overlay"),w=document.querySelector(".modal-quit"),M=document.querySelector(".modal-quit-btn-cancel"),$=document.querySelector(".modal-quit-btn-confirm"),O=document.querySelector(".modal-answer-artists"),I=O.querySelector(".modal-answer-picture-img"),A=O.querySelector(".modal-answer-painting"),T=O.querySelector(".modal-answer-subheader"),R=O.querySelector(".modal-answer-picture-icon-incorrect"),N=O.querySelector(".modal-answer-picture-icon-correct"),j=O.querySelector(".modal-answer-btn"),B=document.querySelector(".modal-answer-paintings"),J=B.querySelector(".modal-answer-picture-img"),D=B.querySelector(".modal-answer-painting"),W=B.querySelector(".modal-answer-subheader"),F=B.querySelector(".modal-answer-picture-icon-incorrect"),H=B.querySelector(".modal-answer-picture-icon-correct"),P=B.querySelector(".modal-answer-btn"),z=document.querySelector(".modal-victory"),G=document.querySelector(".modal-victory-btn-home"),K=document.querySelector(".modal-victory-btn-next"),Q=document.querySelector(".modal-info"),U=document.querySelector(".modal-info-picture"),V=document.querySelector(".modal-info-painting"),X=document.querySelector(".modal-info-subheader"),Y=document.querySelector(".modal-info-btn"),Z=document.querySelector(".header-results"),_=document.querySelector(".header-results-text-home"),ee=document.querySelector(".header-results-text-categories"),te=document.querySelector(".results"),ne=document.querySelectorAll(".results-pictures-item"),ie=document.querySelector(".results-title-number"),se=document.querySelector(".results-title-score");function oe(){t.cornersCover()}let re,ae,ce=n,de=i;function le(t,n){oe(),setTimeout((function(){e.classList.remove("container-mainscreen"),e.classList.add("container-default"),t.classList.add("hidden"),n.classList.add("hidden"),a.classList.remove("hidden"),c.classList.remove("hidden")}),500)}function ue(t,i){oe(),setTimeout((function(){t===n?(e.classList.add("container-mainscreen"),e.classList.remove("container-default")):(e.classList.remove("container-mainscreen"),e.classList.add("container-default")),t.classList.remove("hidden"),i.classList.remove("hidden"),a.classList.add("hidden"),c.classList.add("hidden")}),500)}let me,ge,ve,he,ye={},Le=.2,qe=!1,fe=20;function Se(t,n){oe(),setTimeout((function(){de===i?(e.classList.add("container-mainscreen"),e.classList.remove("container-default")):(e.classList.remove("container-mainscreen"),e.classList.add("container-default")),t.classList.add("hidden"),n.classList.add("hidden"),ce.classList.remove("hidden"),de.classList.remove("hidden")}),400)}null!=localStorage.getItem("settingsObj")?(ye=JSON.parse(localStorage.getItem("settingsObj")),ye.volume?Le=+ye.volume:ye.volume=Le,ye.playWithTimer?qe=!!ye.playWithTimer:ye.playWithTimer=qe,ye.timerDuration?fe=+ye.timerDuration:ye.timerDuration=fe,localStorage.setItem("settingsObj",JSON.stringify(ye))):(ye.volume=Le,ye.playWithTimer=qe,ye.timerDuration=fe,localStorage.setItem("settingsObj",JSON.stringify(ye))),d.forEach((e=>{e.addEventListener("click",(function(){ue(ce,de)}))})),l.addEventListener("click",(function(){ue(ce,de)})),s.addEventListener("click",(function(){ce=n,de=i,le(n,i)})),v.addEventListener("click",(function(){le(ce,de)})),o.addEventListener("click",(function(){re=m,ae=b,ce=u,de=m,Se(n,i)})),r.addEventListener("click",(function(){re=g,ae=x,ce=u,de=g,Se(n,i)})),h.addEventListener("click",(function(){let e=de;ce=n,de=i,Se(u,e)}));let pe=[],be=[],Ce={};null!=localStorage.getItem("ResultsArtists")&&(Ce=JSON.parse(localStorage.getItem("ResultsArtists")));let Ee={};function xe(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}async function ke(){try{const e="https://raw.githubusercontent.com/dumbus/image-data/master/images.json",t=await fetch(e);return await t.json()}catch(e){console.log(e)}}function we(e,t,n=!0){try{const i=new Image;i.src=n?`https://raw.githubusercontent.com/dumbus/image-data/master/full/${e}full.jpg`:`https://raw.githubusercontent.com/dumbus/image-data/master/img/${e}.jpg`,i.onload=()=>{t.style.backgroundImage=`url("${i.src}")`,t.style.backgroundSize="100%"}}catch(e){console.log(e)}}async function Me(){const e=document.querySelector(".questions-artists-buttons"),n=document.querySelectorAll(".questions-artists-buttons-item");let i;we(ve,C),we(ve,I,!1);let s=[];await async function(e){await ke().then((e=>{me=e}));let t=me[e],n=[];for(n.push(t.author);n.length<4;){let e=xe(0,241),t=me[e].author;-1==n.indexOf(t)&&n.push(t)}return[t,n]}(ve).then((e=>{i=e[0],s=e[1]})),A.textContent=i.name,T.textContent=`${i.author}, ${i.year}`,s.sort((()=>Math.random()-.5));let o=s.indexOf(i.author);for(let e=0;e<4;e++)n[e].textContent=s[e];n.forEach((n=>{n.addEventListener("click",(function(){if(n.getAttribute("data-index")==o?pe[he]=!0:pe[he]=!1,1==pe[he]?(N.classList.remove("hidden"),E[he].classList.add("questions-artists-picture-dots-item-correct")):(R.classList.remove("hidden"),E[he].classList.add("questions-artists-picture-dots-item-incorrect")),9===he){let e=0,n=`Round${ge+1}`;pe.forEach((t=>{!0===t&&e++}));let i=document.querySelector(".modal-victory-subheader");i.textContent=e>0?"Congratulations!":"Bad luck...",document.querySelector(".modal-victory-result").textContent=`${e}/10`,t.openModal(z,k),y[ge].querySelector(".categories-item-header-score").textContent=`${e}/10`,y[ge].querySelector(".categories-item-header-score").classList.remove("hidden"),y[ge].classList.remove("categories-item-inactive"),Ce[n]=pe,localStorage.setItem("ResultsArtists",JSON.stringify(Ce))}else e.innerHTML='\n          <div class="questions-artists-buttons-item button" data-index="0"></div>\n          <div class="questions-artists-buttons-item button" data-index="1"></div>\n          <div class="questions-artists-buttons-item button" data-index="2"></div>\n          <div class="questions-artists-buttons-item button" data-index="3"></div>\n          ',t.openModal(O,k)}))}))}async function $e(){document.querySelector(".questions-paintings-grid").innerHTML='\n      <div class="questions-paintings-grid-item">\n        <div class="questions-paintings-grid-item-img"></div>\n        <div class="questions-paintings-grid-item-overlay" data-index="0"></div>\n      </div>\n      <div class="questions-paintings-grid-item">\n        <div class="questions-paintings-grid-item-img"></div>\n        <div class="questions-paintings-grid-item-overlay" data-index="1"></div>\n      </div>\n      <div class="questions-paintings-grid-item">\n        <div class="questions-paintings-grid-item-img"></div>\n        <div class="questions-paintings-grid-item-overlay" data-index="2"></div>\n      </div>\n      <div class="questions-paintings-grid-item">\n        <div class="questions-paintings-grid-item-img"></div>\n        <div class="questions-paintings-grid-item-overlay" data-index="3"></div>\n      </div>\n    ';const e=document.querySelector(".questions-paintings-subheader"),n=document.querySelectorAll(".questions-paintings-grid-item"),i=document.querySelectorAll(".questions-paintings-grid-item-overlay");let s,o=[];await async function(e){await ke().then((e=>{me=e}));let t=me[e],n=[],i=[];for(console.log(e),n.push(t.imageNum),i.push(t.author);n.length<4;){let e=xe(0,241),t=me[e].imageNum,s=me[e].author;-1==n.indexOf(t)&&-1==s.indexOf(i)&&(n.push(t),i.push(s))}return[t,n]}(ve).then((e=>{s=e[0],o=e[1]})),we(ve,J,!1),D.textContent=s.name,W.textContent=`${s.author}, ${s.year}`,o.sort((()=>Math.random()-.5));let r=o.indexOf(s.imageNum);e.textContent=`Which is ${s.author} picture?`;let a=0;n.forEach((e=>{we(o[a],e),a++})),i.forEach((e=>{e.addEventListener("click",(function(){if(e.getAttribute("data-index")==r?be[he]=!0:be[he]=!1,1==be[he]?(H.classList.remove("hidden"),e.classList.add("questions-paintings-grid-item-overlay-correct")):(F.classList.remove("hidden"),e.classList.add("questions-paintings-grid-item-overlay-incorrect")),9===he){let e=0,n=`Round${ge+1}`;be.forEach((t=>{!0===t&&e++}));let i=document.querySelector(".modal-victory-subheader");i.textContent=e>0?"Congratulations!":"Bad luck...",document.querySelector(".modal-victory-result").textContent=`${e}/10`,t.openModal(z,k),L[ge].querySelector(".categories-item-header-score").textContent=`${e}/10`,L[ge].querySelector(".categories-item-header-score").classList.remove("hidden"),L[ge].classList.remove("categories-item-inactive"),Ee[n]=be,localStorage.setItem("ResultsPaintings",JSON.stringify(Ee))}else t.openModal(B,k)}))}))}null!=localStorage.getItem("ResultsPaintings")&&(Ee=JSON.parse(localStorage.getItem("ResultsPaintings"))),m.addEventListener("click",(async e=>{if(re=m,ae=b,!e.target.classList.contains("categories")&&e.target.classList.contains("artists-trigger")){let t=e.target;for(;!t.classList.contains("categories-item");)t=t.parentElement;ge=t.getAttribute("data-index")-1,ve=10*ge,he=0,await Me(),ce=S,de=b,Se(u,m)}})),j.addEventListener("click",(function(){ve++,he++,oe(),setTimeout((function(){Me(),t.closeModal(O,k),N.classList.add("hidden"),R.classList.add("hidden")}),400)})),p.addEventListener("click",(function(){t.openModal(w,k)})),K.addEventListener("click",(function(){ce=u,de=re,Se(S,ae),setTimeout((function(){t.closeModal(O,k),t.closeModal(z,k)}),500)})),G.addEventListener("click",(function(){ce=n,de=i,Se(S,ae),setTimeout((function(){t.closeModal(O,k),t.closeModal(z,k)}),500)})),$.addEventListener("click",(function(){ce=n,de=i,Se(S,ae),setTimeout((function(){t.closeModal(w,k)}),500)})),M.addEventListener("click",(function(){t.closeModal(w,k,!0)})),g.addEventListener("click",(async e=>{if(re=g,ae=x,!e.target.classList.contains("categories")&&e.target.classList.contains("paintings-trigger")){let t=e.target;for(;!t.classList.contains("categories-item");)t=t.parentElement;ge=t.getAttribute("data-index")-1,ve=10*ge+120,he=0,await $e(),ce=S,de=x,Se(u,g)}})),P.addEventListener("click",(function(){ve++,he++,oe(),setTimeout((function(){$e(),t.closeModal(B,k),H.classList.add("hidden"),F.classList.add("hidden")}),400)})),p.addEventListener("click",(function(){t.openModal(w,k)}));for(let e=1;e<13;e++){let t=`Round${e}`,n=0;null!=Ce&&(Ce[t]?(Ce[t].forEach((e=>{!0===e&&n++})),q[e-1].innerHTML=`${n}/10`,y[e-1].classList.remove("categories-item-inactive")):q[e-1].classList.add("hidden"))}for(let e=1;e<13;e++){let t=`Round${e}`,n=0;null!=Ee&&(Ee[t]?(Ee[t].forEach((e=>{!0===e&&n++})),f[e-1].innerHTML=`${n}/10`,L[e-1].classList.remove("categories-item-inactive")):f[e-1].classList.add("hidden"))}async function Oe(e,n){await ke().then((e=>{me=e}));let i,s=`Round${e+1}`,o=0;if("artists"===n){i=10*e;for(let e=0;e<10;e++)ne[e].classList.add("results-pictures-item-inactive"),1==Ce[s][e]&&(o++,ne[e].classList.remove("results-pictures-item-inactive"))}if("pictures"===n){i=10*e+120;for(let e=0;e<10;e++)ne[e].classList.add("results-pictures-item-inactive"),1==Ee[s][e]&&(o++,ne[e].classList.remove("results-pictures-item-inactive"))}for(let e=0;e<10;e++){let n=i;n+=e,ne[e].addEventListener("click",(function(){we(n,U,!1),V.textContent=me[n].name,X.textContent=`${me[n].author}, ${me[n].year}`,t.openModal(Q,k),n++})),Y.addEventListener("click",(function(){t.closeModal(Q,k,!0)}))}for(let e=0;e<10;e++)we(i,ne[e],!1),i++;ie.textContent=`Round ${e+1}`,se.textContent=`${o}/10`,ce=Z,de=te,Se(u,re)}_.addEventListener("click",(function(){let e=de;ce=n,de=i,Se(Z,e)})),ee.addEventListener("click",(function(){ce=u,de=re,Se(Z,te)}));for(let e=0;e<10;e++)q[e].addEventListener("click",(function(){Oe(e,"artists")}));for(let e=0;e<10;e++)f[e].addEventListener("click",(function(){Oe(e,"pictures")}))};window.addEventListener("DOMContentLoaded",(()=>{e(),n()}))})();